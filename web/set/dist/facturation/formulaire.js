function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(i){var a=_isNativeReflectConstruct();return function(){var t,e=_getPrototypeOf(i);return _possibleConstructorReturn(this,a?(t=_getPrototypeOf(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var Formulaire=function(){function n(t,e){_classCallCheck(this,n),this.entity="clientfacturevente",e&&(this.entity="clientdevis"),this.invoice=t,this.devis=e,this.index=0,this.saver=this.invoice.find(".btnFormSaver"),this.wrapperTheme=this.invoice.find(".articles_wrapper"),this.clientSaver=$("#save_new_client"),this.addBtn=this.invoice.find("#addDetail"),this.data=JSON.parse($("#data_json").val()),this.onLoad=!0,this.newForm="",this.unitMesure="",this.type="",this.aibInput="",this.taxespec="",this.table=$("#liste-article"),this.noProduct=$("#new-facture-no-product"),this.totalArticle=0,this.pu="",this.typeVal="",this.taxeSejour="",this.quantite="",this.produit="",this.uttc="",this.ttc="",this.description="",this.selectCLient=$("#operationsclientbundle_clientfacturevente_client"),e&&(this.selectCLient=$("#operationsclientbundle_clientdevis_client")),this.tvaInput=this.invoice.find(".tva").find("input"),this.clientIsMoral=!1,this.invoice.find(".devise").find("select").val(this.data.devise),e?(this.totalHTInp=$("#operationsclientbundle_clientdevis_totalHT"),this.totalTVAInp=$("#operationsclientbundle_clientdevis_totalTVA"),this.totalAIBInp=$("#operationsclientbundle_clientdevis_totalAIB"),this.totalTTCInp=$("#operationsclientbundle_clientdevis_totalTTC")):(this.totalHTInp=$("#operationsclientbundle_clientfacturevente_totalHT"),this.totalTVAInp=$("#operationsclientbundle_clientfacturevente_totalTVA"),this.totalAIBInp=$("#operationsclientbundle_clientfacturevente_totalAIB"),this.totalTTCInp=$("#operationsclientbundle_clientfacturevente_totalTTC")),this.totalTTSInp=$("#totaltaxespecifique"),this.totalNETInp=$("#totalnet"),this.totalHT=0,this.totalHTTemp=0,this.totalTVA=0,this.totalTVATemp=0,this.totalAIB=0,this.totalAIBTemp=0,this.totalTTC=0,this.totalTTCTemp=0,this.totalTTS=0,this.totalTTSTemp=0,this.totalNET=0,this.totalNETTemp=0,console.log(this.data),this.addArticle(),$("#modal_new_client").on("shown.bs.modal",this.activeClientSaver.bind(this)),this.fillClient(),this.saver.on("click",this.submit.bind(this))}return _createClass(n,null,[{key:"bind",value:function(t,e){var i=1<arguments.length&&void 0!==e&&e,a=$(t);0<a.length&&new n(a,i)}}]),_createClass(n,[{key:"submit",value:function(t){t.preventDefault(),this.newForm.remove(),(this.devis?this.invoice.find('form[name="operationsclientbundle_clientdevis"]'):this.invoice.find('form[name="operationsclientbundle_clientfacturevente"]')).submit()}},{key:"fillClient",value:function(){var i=this;i.selectCLient.html('<option value="" selected="selected">Sélectionnez un client</option>'),$.each(i.data.clients,function(t,e){i.selectCLient.append('<option data-ifu="'+e.ifu+'" data-moral="'+e.moral+'" data-tva="'+e.tva+'" value="'+e.id+'">'+e.nom+"</option>")}),i.selectCLient.chosen({width:"100%",placeholder_text_single:"Sélectionner une option"}),i.selectCLient.trigger("chosen:updated"),i.selectCLient.on("change",function(){console.log("client change");var t=$(this).find('option[value="'+$(this).val()+'"]');i.clientIsMoral=t.data("moral"),i.tvaInput.val(t.data("tva"));t=new CustomEvent("clientChange",{detail:{moral:i.clientIsMoral,ifu:t.data("ifu")}});document.dispatchEvent(t),""!==i.pu&&i.calculator()})}},{key:"selectTypeProduit",value:function(){this.resetArticleForm(),this.type.off("change").on("change",this.funcOnTypeArticleChange.bind(this))}},{key:"funcOnTypeArticleChange",value:function(){var t=this;t.typeVal="";var e=$(".article_service");"1"===t.type.val()?(t.typeVal="article",e.text("Article")):"2"===t.type.val()&&(t.typeVal="service",e.text("Service")),"article"===t.typeVal&&(t.unitMesure.hide(),t.quantite.removeClass("col-md-6"),t.quantite.addClass("col-md-12")),"service"===t.typeVal&&(t.unitMesure.show(),t.quantite.removeClass("col-md-12"),t.quantite.addClass("col-md-6")),t.produit.html(t.chargeProduit(t.typeVal)),t.typeVal?(t.produit.chosen({width:"100%"}),t.produit.removeAttr("disabled"),t.produit.trigger("chosen:updated"),t.produit.off("change").on("change",t.selecProduit.bind(t))):(t.produit.attr("disabled",1),t.produit.trigger("chosen:updated"),t.selecProduit())}},{key:"selecProduit",value:function(){var t=this;t.resetArticleForm();var e=t.produit.val();"service"===t.typeVal&&t.unitMesure.find("select").val(t.getInfo("uniteMesure",e)),this.taxeSejour.val(0),"F"===t.getInfo("taxeGroupe",e)?this.taxeSejour.closest(".col-md-12").show("slow"):this.taxeSejour.closest(".col-md-12").hide("slow"),t.pu.val(t.getInfo("prixUnitaireVente",e)),setTimeout(function(){t.quantite.find("input").focus()},200)}},{key:"calculator",value:function(){var t=this.quantite.find("input").val(),e=this.elmCalculator(this.aibInput,this.taxeSejour,this.taxespec,this.pu,this.produit);this.uttc.val(e.uttc),this.ttc.val(e.uttc*t),this.totalHTTemp=this.totalHT+e.pu*t,this.totalTTCTemp=this.totalTTC+e.uttc*t,this.totalAIBTemp=this.totalAIB+e.aib*t,this.totalTVATemp=this.totalTVA+e.tvaAppliquee*t,this.totalTTSTemp=this.totalTTS+e.taxe,this.totalNETTemp=this.netCalculator(this.totalTTCTemp),this.data.liberal&&this.clientIsMoral&&(this.totalNETTemp=this.netCalculator(this.totalTTCTemp-e.aib)),this.totalHTInp.val(Math.round(this.totalHTTemp)),this.totalTVAInp.val(Math.round(this.totalTVATemp)),this.totalTTSInp.val(Math.round(this.totalTTSTemp)),this.totalAIBInp.val(Math.round(this.totalAIBTemp)),this.totalTTCInp.val(Math.round(this.totalTTCTemp)),this.totalNETInp.val(this.totalNETTemp)}},{key:"elmCalculator",value:function(t,e,i,a,n){var o=Number.parseFloat((t.attr("value")?t.attr("value"):t.val()).replace(",",".")),l=e.val().replace(",","."),s=i.val().replace(",","."),r=a.val().replace(",","."),t=(this.data.assujetiTva?this.tvaInput.val().replace(",","."):0)/100*r,e=n.val(),i=this.getInfo("taxeGroupe",e),a=(r=r?+r:0)+(s=s?+s:0)+(o=o||0)+(l=l?+l:0);return"A"!==i&&"E"!==i&&"service"!==this.getInfo("type",e)?a+=t:t=0,e=n.find("option:selected").text(),console.log({uttc:a,taxe:s,pu:r,aib:o,sejour:l,tvaAppliquee:t,produit:e}),{uttc:a,taxe:s,pu:r,aib:o,sejour:l,tvaAppliquee:t,produit:e}}},{key:"netCalculator",value:function(t){return this.data.roundPrice&&t%5!=0?t+(5-t%5):t}},{key:"totalCalculator",value:function(){var t=this,e=(this.data.assujetiTva?this.tvaInput.val():0)/100*t.pu.val(),i=this.quantite.find("input").val(),a=this.getInfo("taxeGroupe",this.produit.val());"A"!==a&&"E"!==a&&"service"!==t.getInfo("type",this.produit.val())||(e=0),this.totalHT+=t.pu.val()*i,this.totalTTC+=+t.ttc.val(),this.totalAIB+=t.aibInput.val()*i,this.totalTVA=+this.totalTVA+e*i,this.totalTTS+=+t.taxespec.val(),this.totalNET=+this.totalNET+ +t.ttc.val(),this.data.liberal&&this.clientIsMoral&&(this.totalNET=t.netCalculator(t.totalTTC-t.totalAIB)),this.totalHTInp.val(this.totalHT),this.totalTVAInp.val(this.totalTVA),this.totalTTSInp.val(this.totalTTS),this.totalAIBInp.val(this.totalAIB),this.totalTTCInp.val(this.totalTTC),this.totalNETInp.val(this.totalNET)}},{key:"onInputchange",value:function(){var t=this.quantite.find("input");t.off("change").on("change",this.calculator.bind(this)),t.off("keyup").on("keyup",this.calculator.bind(this)),this.aibInput.closest(".form-group").find('input[type="checkbox"]').off("change").on("change",this.calculator.bind(this)),this.taxespec.off("change").on("change",this.calculator.bind(this)),this.taxespec.off("keyup").on("keyup",this.calculator.bind(this))}},{key:"resetArticleForm",value:function(){this.unitMesure.find("select").val("1"),this.quantite.find("input").val(""),this.aibInput.closest(".form-group").find('input[type="checkbox"]').prop("checked",!1),this.aibInput.val(""),this.taxespec.closest(".form-group").find('input[type="checkbox"]').prop("checked",!1),this.taxespec.val(""),this.ttc.val(""),this.pu.val(""),this.uttc.val(""),this.description.val("")}},{key:"getInfo",value:function(e,i){var a="";return this.data.stock.forEach(function(t){t.id==i&&(a=t[e])}),a}},{key:"chargeProduit",value:function(e){var i='<option value="">Sélectionnez un '+(e=""===e?"élément":e)+"</option>";return this.data.stock.forEach(function(t){t.type===e&&(i+='<option value="'.concat(t.id,'">').concat(t.designation,"</option>"))}),i}},{key:"addArticle",value:function(){var i=this;this.addBtn.off("click").on("click",function(t){var e;t.preventDefault(),i.onLoad||""!==i.selectCLient.val()||i.data.edit?i.onLoad||""!==i.pu.val()&&""!==i.quantite.find("input").val()?($(".article_item").hide(),e=i.wrapperTheme.data("prototype"),t=i.wrapperTheme.data("index"),i.index=t,i.newForm=$(e.replace(/__name__/g,t)),i.wrapperTheme.data("index",t+1),i.wrapperTheme.append(i.newForm),i.onLoad||(i.totalCalculator(),i.addArticleToTable()),i.onLoad=!1,i.unitMesure=i.newForm.find(".unit_mesure"),i.quantite=i.newForm.find(".quantite"),i.type=i.newForm.find(".select_type").find("select"),i.taxeSejour=i.newForm.find(".taxe-de-sejour"),i.produit=i.newForm.find(".select_produit").find("select"),i.produit.attr("disabled","1"),i.pu=i.newForm.find(".prix_vente_unitaire").find("input"),i.aibInput=i.newForm.find(".aib"),i.taxespec=i.newForm.find(".taxespecifique"),i.description=i.newForm.find(".div_description").find("textarea"),i.uttc=i.newForm.find(".prix_unitaire_ttc").find("input"),i.ttc=i.newForm.find(".sousTotalTTC").find("input"),i.onInputchange(),i.selectTypeProduit(),t=i.selectCLient.val()?i.selectCLient.find('option[value="'+i.selectCLient.val()+'"]').data("ifu"):"",CheckInput.bind(".checkbox",t,i.data.liberal),$(".select_article:last").chosen({width:"100%",placeholder_text_single:"Sélectionnez une option"}),$(".select_type_produit").chosen({width:"100%",placeholder_text_single:"Sélectionnez un type"})):i.notif("Veuillez remplir tous les champs et reéssayer","warning"):i.notif("Veuillez renseigner un client au premier abord","warning")}),this.addBtn.click()}},{key:"addArticleToTable",value:function(){var t=this;t.totalArticle++;var e=$('\n      <tr data-index="'.concat(t.index-1,'" style="display: none;">\n        <td>').concat(t.produit.find("option:selected").text(),"</td>\n        <td>").concat(t.quantite.find("input").val(),"</td>\n        <td>").concat(t.aibInput.val(),"</td>\n        <td>").concat(Math.round(""!=t.taxespec.val()?t.taxespec.val():0),"</td>\n        <td>").concat(Math.round(t.ttc.val()),"</td>\n        <td>").concat(t.description.val().substring(0,15)+"...",'</td>\n        <td>\n          <div class="btn-group">\n            <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown">\n              Action\n            </button>\n            <ul class="dropdown-menu">\n              <li class="edit-article"><a href="#"><i class="fa fa-edit"></i> Editer</a></li>\n              <li class="del-article"><a href="#"><i class="fa fa-trash"></i> Supprimer</a></li>\n            </ul>\n          </div>\n        </td>\n      </tr>\n    '));t.table.append(e),e.show("slow"),e.siblings().each(function(){$(this).find(".dropdown-toggle").removeAttr("disabled")}),this.articleActions(!1,e),1===t.totalArticle&&t.noProduct.hide("slow")}},{key:"articleActions",value:function(e,t){var i=this,a=$(".del-article"),n=$(".edit-article");t&&(a=t.find(".del-article"),n=t.find(".edit-article")),a.off("click").on("click",function(t){i.deleteArticle(t,this,i,e)}),n.off("click").on("click",function(t){i.editArticle(t,this,i,e)})}},{key:"deleteArticle",value:function(t,e,i,a){t.preventDefault(),i.totalArticle--;var n=$(e).closest("tr"),t="#operationsclientbundle_"+i.entity+"_details_"+n.data("index")+"_type",e=$(t).closest(".article_item");!0===a&&(t="#operationsclientbundle_"+i.entity+"_details_"+n.data("index"),e=$(t).parent("div"));a=+e.find(".quantite_produit").val();n.hide("slow",function(){n.remove(),0===i.totalArticle&&i.noProduct.show("slow")});t=i.elmCalculator(e.find(".aib"),e.find(".taxe-de-sejour"),e.find(".taxespecifique"),e.find(".prix_vente_unitaire"),e.find(".select_article"));i.totalHT=i.totalHT-t.pu*a,i.totalAIB=i.totalAIB-t.aib*a,i.totalTVA=+i.totalTVA-t.tvaAppliquee*a,i.totalTTS=i.totalTTS-t.taxe,i.totalTTC=i.totalTTC-t.uttc*a,i.totalNET=i.netCalculator(i.totalTTC),i.data.liberal&&i.clientIsMoral&&(i.totalNET=i.netCalculator(i.totalTTC-i.totalAIB)),i.totalHTInp.val(i.totalHT),i.totalTVAInp.val(i.totalTVA),i.totalTTSInp.val(i.totalTTS),i.totalAIBInp.val(i.totalAIB),i.totalTTCInp.val(i.totalTTC),i.totalNETInp.val(i.totalNET),e.remove()}},{key:"editArticle",value:function(t,e,i,a){t.preventDefault();var n=$(e).closest("tr");n.attr("data-jindex")&&i.deleteArticle(t,e,i,a),n.siblings().each(function(){$(this).find(".dropdown-toggle").attr("disabled",1)});t="#operationsclientbundle_"+i.entity+"_details_"+n.data("index")+"_type";!0===a&&(t="#operationsclientbundle_"+i.entity+"_details_"+n.data("index"));var o,e=$(t).closest(".article_item");!0===a&&(e=$(t).parent("div")),n.attr("data-jindex")?(i.selectTypeProduit(),o=i.data.edit.details[n.data("jindex")],console.log("concerned data",o),i.newForm.find(".select_type_produit").find("option").each(function(){var t=$(this);t.text().trim().toLowerCase()===i.getInfo("type",o.produit)&&t.attr("selected","selected")}),i.funcOnTypeArticleChange(),i.newForm.find(".select_article").val(o.produit),i.newForm.find(".description").val(o.description),i.newForm.find(".unite_mesure").val(o.uniteMesure),i.newForm.find(".quantite_produit").val(o.quantite),i.newForm.find(".taxe-de-sejour").val(o.taxeDeSejour),i.newForm.find(".prix_vente_unitaire").val(o.prixVenteUnitaire),o.hasTaxeSpecifique&&(i.newForm.find(".checkbox_taxe_specifique").prop("checked",!0),i.newForm.find(".taxespecifique").val(o.taxeSpecifique),i.newForm.find(".taxespecifique").removeAttr("disabled"),i.newForm.find(".textarea_description_taxe_specifique").val(o.description),i.newForm.find(".textarea_description_taxe_specifique").closest(".raisonTaxeSpec").show("slow"),console.log("textarea_description_taxe_specifique showed")),0<o.taxeDeSejour&&i.newForm.find(".taxe-de-sejour").closest(".col-md-12").show(),a=0,o.aibDeductible&&((a=o.tauxAIB)<1&&(a*=o.prixVenteUnitaire),i.newForm.find(".aib").val(a),i.newForm.find(".aib").parent("div").find('input[type="checkbox"]').prop("checked",!0)),t=o.prixVenteUnitaire+o.taxeSpecifique+o.taxeDeSejour+a,"A"!==(a=i.getInfo("taxeGroupe",o.produit))&&"E"!==a&&"service"!==i.getInfo("type",o.produit)&&(t+=(i.data.assujetiTva?i.tvaInput.val().replace(",","."):0)/100*o.prixVenteUnitaire),i.newForm.find(".prix_unitaire_ttc").find("input").val(t),i.newForm.find(".sousTotalTTC").find("input").val(t*o.quantite),i.newForm.find(".chosen-select").trigger("chosen:updated"),e.remove()):(i.newForm.remove(),e.show(),i.quantite=e.find(".quantite"),i.pu=e.find(".prix_vente_unitaire").find("input"),i.unitMesure=e.find(".unit_mesure"),i.type=e.find(".select_type").find("select"),i.taxeSejour=e.find(".taxe-de-sejour"),0<Number.parseFloat(i.taxeSejour.val())&&i.taxeSejour.closest(".col-md-12").show(),i.produit=e.find(".select_produit").find("select"),i.aibInput=e.find(".aib"),i.taxespec=e.find(".taxespecifique"),console.log("$this.taxespec.val()",i.taxespec.val()),i.description=e.find(".div_description").find("textarea"),i.uttc=e.find(".prix_unitaire_ttc").find("input"),i.ttc=e.find(".sousTotalTTC").find("input"),i.index=n.data("index")+1),n.hide("slow",function(){n.remove(),0===i.totalArticle&&i.noProduct.show("slow")}),1<=i.totalArticle&&i.noProduct.hide("slow")}},{key:"notif",value:function(t,e){e=e||"success";var i=$("#alert-raw");i.fadeOut(1),i.removeClass("alert-danger"),i.removeClass("alert-success"),i.removeClass("alert-warning"),i.addClass("alert-"+e),i.find("p").text(t),i.fadeIn(500),i.find(".user-close-message-box").on("click",function(){i.fadeOut(2e3)}),setTimeout(function(){i.fadeOut(2e3)},1e4)}},{key:"activeClientSaver",value:function(){this.clientSaver.off("click").on("click",this.saveClient.bind(this))}},{key:"saveClient",value:function(t){t.preventDefault();var i=this,e=i.clientSaver;e.button("loading");var a=!1;if($(".req").each(function(){""===$(this).val()&&($("#ctl_al").show(),a=!0)}),a)return 0;t=$("#formNewClient");$.ajax({type:"POST",url:t.attr("action"),processData:!1,contentType:!1,data:new FormData(t[0]),success:function(t){void 0!==t.error?($("#modal_new_client").find(".modal-content").html(t.body),$("#save_new_client").off("click").on("click",i.saveClient.bind(i))):($.each(t.arrayClients,function(t,e){i.selectCLient.append('<option data-ifu="'+e.ifu+'" data-moral="'+e.moral+'" data-tva="'+e.tva+'" selected value="'+e.id+'">'+e.nom+"</option>")}),i.selectCLient.chosen({width:"100%",placeholder_text_single:"Sélectionner une option"}),i.selectCLient.val(t.idNewClient),i.selectCLient.trigger("chosen:updated"),$("#form_shortcut_new_client").empty(),$("#newClient").hide(),$("#modal_new_client").modal("hide"))},always:function(){e.button("reset")}})}}]),n}(),FormulaireEdit=function(){_inherits(n,Formulaire);var i=_createSuper(n);function n(t,e){return _classCallCheck(this,n),(e=i.call(this,t,e)).oldArticle=$("#operationsclientbundle_"+e.entity+"_details"),e.edit=e.data.edit,e.dateFacture=$(".date-facture").find("input"),e.dateReglement=$(".date-reglement").find("input"),e.edit&&(e.fillFacture(),console.log("edit"),e.preFillArticleToTable()),e}return _createClass(n,null,[{key:"bind",value:function(t,e){var i=1<arguments.length&&void 0!==e&&e,a=$(t);0<a.length&&new n(a,i)}}]),_createClass(n,[{key:"fillFacture",value:function(){var t=this.selectCLient.closest(".input-group"),e=t.parent();t.hide(),e.append('<div class="input-group"><input type="text" class="form-control" readonly="readonly" value="'.concat(this.edit.client,'"></div>'));t=this.edit.data_facture.date,e=(new Date).getFullYear()+"-"+(new Date).getMonth()+"-"+(new Date).getDay()+" 00:00:00";this.edit.data_reglement&&(e=this.edit.data_reglement.date),t=t.split(" "),e=e.split(" "),this.dateFacture.val(t[0]),this.dateReglement.val(e[0]),console.log(t[0],e[0]),this.invoice.find(".devise").find("select").val(this.edit.devise),this.tvaInput.val(this.edit.tva),this.totalHT=this.edit.totalHT,this.totalAIB=this.edit.totalAIB,this.totalTTC=this.edit.totalTTC,this.totalTVA=this.edit.totalTVA,this.totalTTS=this.ttsCalculator(),this.totalNET=this.netCalculator(+this.totalTTCInp.val()),this.totalHTInp.val(this.totalHT),this.totalTVAInp.val(this.totalTVA),this.totalTTSInp.val(this.totalTTS),this.totalAIBInp.val(this.totalAIB),this.totalTTCInp.val(this.totalTTC),this.totalNETInp.val(this.totalNET)}},{key:"ttsCalculator",value:function(){var e=0;return this.edit.details.forEach(function(t){e+=+t.taxeSpecifique}),e}},{key:"preFillArticleToTable",value:function(){var o=this,l=0;this.oldArticle.children().each(function(){var t=$(this),e=o.totalArticle,i="#operationsclientbundle_"+o.entity+"_details_"+e+"_",a=t.find(i+"quantite").val();console.log("index",e),o.totalArticle++;var n=Number.parseFloat(t.find(i+"tauxAIB").val().replace(",","."));n*=t.find(i+"prixVenteUnitaire").val(),t.find(i+"tauxAIB").val(n);n=o.elmCalculator(t.find(i+"tauxAIB"),t.find(i+"taxeDeSejour"),t.find(i+"taxeSpecifique"),t.find(i+"prixVenteUnitaire"),t.find(i+"produit")),i=$('\n        <tr data-jindex="'.concat(l,'" data-index="').concat(e,'" style="display: none;">\n          <td>').concat(n.produit,"</td>\n          <td>").concat(a,"</td>\n          <td>").concat(n.aib,"</td>\n          <td>").concat(Math.round(n.taxe),"</td>\n          <td>").concat(Math.round(n.uttc*a),"</td>\n          <td>").concat(t.find(i+"description").text().substring(0,15)+"...",'</td>\n          <td>\n            <div class="btn-group">\n              <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown">\n                Action\n              </button>\n              <ul class="dropdown-menu">\n                <li class="edit-article"><a href="#"><i class="fa fa-edit"></i> Editer</a></li>\n                <li class="del-article"><a href="#"><i class="fa fa-trash"></i> Supprimer</a></li>\n              </ul>\n            </div>\n          </td>\n        </tr>\n      '));l++,o.table.append(i),i.show("slow"),o.articleActions(!0),1===o.totalArticle&&o.noProduct.hide("slow")})}}]),n}();